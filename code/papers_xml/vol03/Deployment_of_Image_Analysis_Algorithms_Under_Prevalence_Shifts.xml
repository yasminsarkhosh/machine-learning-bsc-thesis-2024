<?xml version="1.0" encoding="UTF-8"?>
<TEI xml:space="preserve" xmlns="http://www.tei-c.org/ns/1.0" 
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://www.tei-c.org/ns/1.0 https://raw.githubusercontent.com/kermitt2/grobid/master/grobid-home/schemas/xsd/Grobid.xsd"
 xmlns:xlink="http://www.w3.org/1999/xlink">
	<teiHeader xml:lang="en">
		<fileDesc>
			<titleStmt>
				<title level="a" type="main">Deployment of Image Analysis Algorithms Under Prevalence Shifts</title>
				<funder ref="#_RZXQauW">
					<orgName type="full">German Federal Ministry of Health</orgName>
				</funder>
				<funder ref="#_M2WaCqk">
					<orgName type="full">State Parliament of Baden-Württemberg for the Innovation Campus Health + Life Science Alliance Heidelberg Mannheim</orgName>
				</funder>
			</titleStmt>
			<publicationStmt>
				<publisher>Springer Nature Switzerland</publisher>
				<availability status="unknown"><p>Copyright Springer Nature Switzerland</p>
				</availability>
				<date type="published" when="2023">2023</date>
			</publicationStmt>
			<sourceDesc>
				<biblStruct>
					<analytic>
						<author role="corresp">
							<persName><forename type="first">Patrick</forename><surname>Godau</surname></persName>
							<email>patrick.godau@dkfz-heidelberg.de</email>
							<affiliation key="aff0">
								<orgName type="department" key="dep1">Division of Intelligent Medical Systems (IMSY)</orgName>
								<orgName type="department" key="dep2">German Cancer Research Center (DKFZ)</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
							<affiliation key="aff1">
								<orgName type="department">National Center for Tumor Diseases (NCT)</orgName>
								<orgName type="institution">NCT Heidelberg</orgName>
							</affiliation>
							<affiliation key="aff3">
								<orgName type="department">Faculty of Mathematics and Computer Science</orgName>
								<orgName type="institution">Heidelberg University</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
							<affiliation key="aff4">
								<orgName type="department">HIDSS4Health -Helmholtz Information and Data Science School for Health</orgName>
								<address>
									<settlement>Karlsruhe, Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName><forename type="first">Piotr</forename><surname>Kalinowski</surname></persName>
							<affiliation key="aff0">
								<orgName type="department" key="dep1">Division of Intelligent Medical Systems (IMSY)</orgName>
								<orgName type="department" key="dep2">German Cancer Research Center (DKFZ)</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
							<affiliation key="aff4">
								<orgName type="department">HIDSS4Health -Helmholtz Information and Data Science School for Health</orgName>
								<address>
									<settlement>Karlsruhe, Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName><forename type="first">Evangelia</forename><surname>Christodoulou</surname></persName>
							<affiliation key="aff0">
								<orgName type="department" key="dep1">Division of Intelligent Medical Systems (IMSY)</orgName>
								<orgName type="department" key="dep2">German Cancer Research Center (DKFZ)</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName><forename type="first">Annika</forename><surname>Reinke</surname></persName>
							<affiliation key="aff0">
								<orgName type="department" key="dep1">Division of Intelligent Medical Systems (IMSY)</orgName>
								<orgName type="department" key="dep2">German Cancer Research Center (DKFZ)</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
							<affiliation key="aff3">
								<orgName type="department">Faculty of Mathematics and Computer Science</orgName>
								<orgName type="institution">Heidelberg University</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
							<affiliation key="aff5">
								<orgName type="department" key="dep1">Helmholtz Imaging</orgName>
								<orgName type="department" key="dep2">German Cancer Research Center (DKFZ)</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName><forename type="first">Minu</forename><surname>Tizabi</surname></persName>
							<affiliation key="aff0">
								<orgName type="department" key="dep1">Division of Intelligent Medical Systems (IMSY)</orgName>
								<orgName type="department" key="dep2">German Cancer Research Center (DKFZ)</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
							<affiliation key="aff5">
								<orgName type="department" key="dep1">Helmholtz Imaging</orgName>
								<orgName type="department" key="dep2">German Cancer Research Center (DKFZ)</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName><forename type="first">Luciana</forename><surname>Ferrer</surname></persName>
							<affiliation key="aff6">
								<orgName type="institution" key="instit1">Instituto de Ciencias de la Computación</orgName>
								<orgName type="institution" key="instit2">UBA-CONICET</orgName>
								<address>
									<settlement>Buenos Aires</settlement>
									<country key="AR">Argentina</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName><forename type="first">Paul</forename><forename type="middle">F</forename><surname>Jäger</surname></persName>
							<affiliation key="aff5">
								<orgName type="department" key="dep1">Helmholtz Imaging</orgName>
								<orgName type="department" key="dep2">German Cancer Research Center (DKFZ)</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
							<affiliation key="aff7">
								<orgName type="department">German Cancer Research Center (DKFZ)</orgName>
								<orgName type="laboratory">Interactive Machine Learning Group</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
						</author>
						<author>
							<persName><forename type="first">Lena</forename><surname>Maier-Hein</surname></persName>
							<affiliation key="aff0">
								<orgName type="department" key="dep1">Division of Intelligent Medical Systems (IMSY)</orgName>
								<orgName type="department" key="dep2">German Cancer Research Center (DKFZ)</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
							<affiliation key="aff1">
								<orgName type="department">National Center for Tumor Diseases (NCT)</orgName>
								<orgName type="institution">NCT Heidelberg</orgName>
							</affiliation>
							<affiliation key="aff3">
								<orgName type="department">Faculty of Mathematics and Computer Science</orgName>
								<orgName type="institution">Heidelberg University</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
							<affiliation key="aff5">
								<orgName type="department" key="dep1">Helmholtz Imaging</orgName>
								<orgName type="department" key="dep2">German Cancer Research Center (DKFZ)</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
							<affiliation key="aff8">
								<orgName type="department">Medical Faculty</orgName>
								<orgName type="institution">Heidelberg University</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
						</author>
						<author>
							<affiliation key="aff2">
								<orgName type="department">Partnership Between DKFZ</orgName>
								<orgName type="institution">University Medical Center Heidelberg</orgName>
								<address>
									<settlement>Heidelberg</settlement>
									<country key="DE">Germany</country>
								</address>
							</affiliation>
						</author>
						<title level="a" type="main">Deployment of Image Analysis Algorithms Under Prevalence Shifts</title>
					</analytic>
					<monogr>
						<title level="m">Lecture Notes in Computer Science</title>
						<idno type="ISSN">0302-9743</idno>
						<idno type="eISSN">1611-3349</idno>
						<imprint>
							<publisher>Springer Nature Switzerland</publisher>
							<biblScope unit="page" from="389" to="399"/>
							<date type="published" when="2023" />
						</imprint>
					</monogr>
					<idno type="MD5">68F8BEBA8DBA64180E934F9D4DB2C223</idno>
					<idno type="DOI">10.1007/978-3-031-43898-1_38</idno>
				</biblStruct>
			</sourceDesc>
		</fileDesc>
		<encodingDesc>
			<appInfo>
				<application version="0.8.0" ident="GROBID" when="2024-03-24T10:27+0000">
					<desc>GROBID - A machine learning software for extracting information from scholarly documents</desc>
					<ref target="https://github.com/kermitt2/grobid"/>
				</application>
			</appInfo>
		</encodingDesc>
		<profileDesc>
			<textClass>
				<keywords>
					<term>Prevalence shift</term>
					<term>Medical image classification</term>
					<term>Generalization</term>
					<term>Domain Gap</term>
				</keywords>
			</textClass>
			<abstract/>
		</profileDesc>
	</teiHeader>
	<text xml:lang="en">
		<body>
<div xmlns="http://www.tei-c.org/ns/1.0"><p>Abstract. Domain gaps are among the most relevant roadblocks in the clinical translation of machine learning (ML)-based solutions for medical image analysis. While current research focuses on new training paradigms and network architectures, little attention is given to the specific effect of prevalence shifts on an algorithm deployed in practice. Such discrepancies between class frequencies in the data used for a method's development/validation and that in its deployment environment(s) are of great importance, for example in the context of artificial intelligence (AI) democratization, as disease prevalences may vary widely across time and location. Our contribution is twofold. First, we empirically demonstrate the potentially severe consequences of missing prevalence handling by analyzing (i) the extent of miscalibration, (ii) the deviation of the decision threshold from the optimum, and (iii) the ability of validation metrics to reflect neural network performance on the deployment population as a function of the discrepancy between development and deployment prevalence. Second, we propose a workflow for prevalenceaware image classification that uses estimated deployment prevalences to adjust a trained classifier to a new environment, without requiring additional annotated deployment data. Comprehensive experiments based P. Godau and P. Kalinowski contributed equally to this paper. on a diverse set of 30 medical classification tasks showcase the benefit of the proposed workflow in generating better classifier decisions and more reliable performance estimates compared to current practice. Machine learning (ML) has begun revolutionizing many fields of imaging research and practice. The field of medical image analysis, however, suffers from a substantial translational gap that sees a large number of methodological developments fail to reach (clinical) practice and thus stay short of generating (patient) benefit. A major roadblock are dataset shifts, situations in which the distributions of data used for algorithm development/validation and its deployment, differ due to exogenous factors such as dissimilar cohorts or differences in the acquisition process <ref type="bibr" target="#b7">[8,</ref><ref type="bibr" target="#b39">40]</ref>. In the following, we focus on prevalence shifts, which are highly relevant in the context of global artificial intelligence (AI) <ref type="bibr" target="#b36">[37]</ref>. Common causes for prevalence shifts include sample selection bias and variations in environmental factors like season or geography <ref type="bibr" target="#b7">[8,</ref><ref type="bibr" target="#b10">11,</ref><ref type="bibr" target="#b39">40]</ref>. According to prior work <ref type="bibr" target="#b10">[11]</ref> as well as our own analyses, prevalence handling is especially crucial in the following steps related to model deployment:</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="1">Introduction</head><p>Model Re-calibration: After a prevalence shift models need to be recalibrated. This has important implications on the decisions made based on predicted class scores (see next point). Note in this context that deep neural networks tend not to be calibrated after training in the first place <ref type="bibr" target="#b14">[15]</ref>. Decision Rule: A decision rule is a strategy transforming continuous predicted class scores into a single classification decision. Simply using the argmax operator ignores the theoretical boundary conditions derived from Bayes theory. Importantly, argmax relies on the predicted class scores to be calibrated and is thus highly sensitive to prevalence shifts <ref type="bibr" target="#b12">[13]</ref>. Furthermore, it only yields the optimal decision for specific metrics. Analogously, tuned decision rules may not be invariant to prevalence shifts.</p><p>Performance Assessment: Class frequencies observed in one test set are in general not representative of those encountered in practice. This implies that the scores for widely used prevalence-dependent metrics, such as Accuracy, F1 Score, and Matthews Correlation Coefficient (MCC), would substantially differ when assessed under the prevalence shift towards clinical practice <ref type="bibr" target="#b26">[27]</ref>.</p><p>This importance, however, is not reflected in common image analysis practice. Through a literature analysis, we found that out of a total of 53 research works published between 01/2020 and beginning of 03/2023 that used any of the data included in our study, only one explicitly mentioned re-calibration. Regarding the most frequently implemented decision rules, roughly three quarters of publications did not report any strategy, which we strongly assume to imply use of the default argmax operator. Moreover, both our analysis and previous work show Accuracy and F1 Score to be among the most frequently used metrics for assessing classification performance in comparative medical image analysis <ref type="bibr" target="#b25">[26,</ref><ref type="bibr" target="#b26">27]</ref>, indicating that severe performance deviations under potential prevalence shifts are a widespread threat.</p><p>Striving to bridge the translational gap in AI-based medical imaging research caused by prevalence shifts, our work provides two main contributions: First, we demonstrate the potential consequences of ignoring prevalence shifts on a diverse set of medical classification tasks. Second, we assemble a comprehensive workflow for image classification, which is robust to prevalence shifts. As a key advantage, our proposal requires only an estimate of the expected prevalences rather than annotated deployment data and can be applied to any given black box model.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2">Methods</head></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2.1">Workflow for Prevalence-Aware Image Classification</head><p>Our workflow combines existing components of validation in a novel manner. As illustrated in Fig. <ref type="figure" target="#fig_0">1</ref>, it leverages estimated deployment prevalences to adjust an already trained model to a new environment. We use the following terminology.</p><formula xml:id="formula_0">Fundamentals: We define a dataset D := {(x i , y i )|1 ≤ i ≤ N } by a set of N images x i ∈ X and labels y i ∈ Y with Y = {1, . . . , C}. P D is a C-dimensional vector called the prevalences of D, where P D (k) := |{(x i , y i ) ∈ D|y i = k}|/N is the prevalence of class k ∈ Y . The fraction max k {P D (k)}/ min k {P D (k)} is named the imbalance ratio (IR) of D.</formula><p>Re-calibration: We refer to the output of a model ϕ : X → R C before applying the softmax activation as ϕ(x). It can be re-calibrated by applying a transformation f . Taking the softmax of ϕ(x) (no re-calibration) or of f (ϕ(x)), we obtain predicted class scores s x . The probably most popular re-calibration approach is referred to as "temperature scaling" <ref type="bibr" target="#b14">[15]</ref> and requires only a single parameter t ∈ R to be estimated: f temp (ϕ(x)) = ϕ(x)/t. The transformation parameter(s) is/are learned with minimization of the cross-entropy loss.</p><p>Decision Rule: A decision rule d is a deterministic algorithm that maps predicted class scores s x to a final prediction d(s x ) ∈ Y . The most widely used decision rule is the argmax operator, although various alternatives exist <ref type="bibr" target="#b26">[27]</ref>.</p><p>To overcome problems caused by prevalence shifts, we propose the following workflow (Fig. <ref type="figure" target="#fig_0">1b</ref>).</p><p>Step 1: Estimate the deployment prevalences: The first step is to estimate the prevalences in the deployment data D dep , e.g., based on medical records, epidemiological research, or a data-driven approach <ref type="bibr" target="#b22">[23,</ref><ref type="bibr" target="#b31">32]</ref>. The workflow requires an underlying anticausal connection of image and label, i.e., a label y causes the image x (e.g., presence of a disease has a visual effect) <ref type="bibr" target="#b7">[8,</ref><ref type="bibr" target="#b10">11]</ref>, to be verified at this point.</p><p>Step 2: Perform prevalence-aware re-calibration: Given a shift of prevalences between the calibration and deployment dataset (P D cal = P D dep ), we can assume the likelihoods P (x|y = k) to stay identical for an anticausal problem (note that we are ignoring manifestation and acquisition shifts during deployment <ref type="bibr" target="#b7">[8]</ref>). Under mild assumptions <ref type="bibr" target="#b22">[23,</ref><ref type="bibr" target="#b40">41]</ref>, weight adaptation in the loss function optimally solves the prevalence shift for a classifier. In the presence of prevalence shifts, we therefore argue for adaptation of weights in the cross-entropy loss i -w(y i ) log(s i (y i )) according to the expected prevalences; more precisely, for class k we use the weight w(k) = P D dep (k)/P D cal (k) during the learning of the transformation parameters <ref type="bibr" target="#b10">[11,</ref><ref type="bibr" target="#b33">34,</ref><ref type="bibr" target="#b40">41]</ref>. Furthermore, since temperature scaling's single parameter t is incapable of correcting the shift produced by a mismatch in prevalences, we add a bias term b ∈ R C to be estimated alongside t as suggested by <ref type="bibr" target="#b1">[2,</ref><ref type="bibr" target="#b5">6,</ref><ref type="bibr" target="#b28">29]</ref>. We refer to this re-calibration approach as "affine scaling":</p><formula xml:id="formula_1">f aff (ϕ(x)) = ϕ(x)/t + b.</formula><p>Step 3: Configure validation metric with deployment prevalences: Prevalence-dependent metrics, such as Accuracy, MCC, or the F1 Score, are widely used in image analysis due to their many advantages <ref type="bibr" target="#b26">[27]</ref>. However, they reflect a model's performance only with respect to the specific, currently given prevalence. This problem can be overcome with the metric Expected Cost (EC) <ref type="bibr" target="#b12">[13]</ref>. In its most general form, we can express EC as EC = k P D (k) j c kj R kj , where c kj refers to the "costs" we assign to the decision of classifying a sample of class k as j and R kj is the fraction of all samples with reference class k that have been predicted as j. Note that the standard 0-1 costs (c kk = 0 for all k and c kj = 1 for k = j) reduces to EC being 1 minus Accuracy. To use EC as a robust estimator of performance, we propose replacing the prevalences P D (k) with those previously estimated in step 1 <ref type="bibr" target="#b12">[13]</ref>.</p><p>Step 4: Set prevalence-aware decision rule: Most counting metrics <ref type="bibr" target="#b26">[27]</ref> require some tuning of the decision rule during model development, as the argmax operator is generally not the optimal option. This tuning relies on data from the development phase and the resulting decision rule is likely dependent on development prevalences and does not generalize (see Sec. 3). On the other hand, EC, as long as the predicted class scores are calibrated, yields the optimal decision rule argmin k j c jk s x (j) <ref type="bibr" target="#b2">[3,</ref><ref type="bibr" target="#b15">16]</ref>. For standard 0-1 costs, this simplifies to the argmax operator.</p><p>Step 5: External validation: The proposed steps for prevalence-aware image classification have strong theoretical guarantees, but additional validation on the actual data of the new environment is indispensable for monitoring <ref type="bibr" target="#b32">[33]</ref>.</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="2.2">Experimental Design</head><p>The purpose of our experiments was twofold: (1) to quantify the effect of ignoring prevalence shifts when validating and deploying models and (2) to show the value of the proposed workflow. The code for our experiments is available at https:// github.com/IMSY-DKFZ/prevalence-shifts.</p><p>Medical Image Classification Tasks. To gather a wide range of image classification tasks for our study, we identified medical image analysis tasks that are publicly available and provide at least 1000 samples. This resulted in 30 tasks covering the modalities laparoscopy <ref type="bibr" target="#b21">[22,</ref><ref type="bibr" target="#b37">38]</ref>, gastroscopy/colonoscopy <ref type="bibr" target="#b4">[5,</ref><ref type="bibr" target="#b29">30]</ref>, magnetic resonance imaging (MRI) <ref type="bibr" target="#b3">[4,</ref><ref type="bibr" target="#b8">9]</ref>, X-ray <ref type="bibr" target="#b0">[1,</ref><ref type="bibr" target="#b17">18,</ref><ref type="bibr" target="#b19">20,</ref><ref type="bibr" target="#b30">31]</ref>, fundus photography <ref type="bibr" target="#b23">[24]</ref>, capsule endoscopy <ref type="bibr" target="#b34">[35]</ref>, and microscopy <ref type="bibr" target="#b13">[14]</ref> (Fig. <ref type="figure" target="#fig_1">2</ref>). We split each task as follows: 30% of the data -referred to as "deployment test set" D depwas used as a hold-out split to sample subsets D dep (r) representing a deployment scenario with IR r. The remaining data set made up the "development data", comprising the "development test set" D test (10%; class-balanced), the "training set" (50%) and the "validation set" (10%; also used for calibration).</p><p>Experiments. For all experiments, the same neural network models served as the basis. To mimic a prevalence shift, we sub-sampled datasets D dep (r) from the deployment test sets D dep according to IRs r ∈ <ref type="bibr" target="#b0">[1,</ref><ref type="bibr" target="#b9">10]</ref> with a step size of 0.5. The experiments were performed with the popular prevalence-dependent metrics Accuracy, MCC, and F1 Score, as the well as EC with 0-1 costs. For our empirical analyses, we trained neural networks (specifications: see Table <ref type="table">2</ref> Suppl.) for all 30 classification tasks introduced in Sect. 2.2. In the interest of better reproducibility and interpretability, we focused on a homogeneous workflow (e.g., by fixing hyperparameters across tasks) rather than aiming to achieve the best possible Accuracy for each individual task. The following three experiments were performed. <ref type="bibr" target="#b0">(1)</ref> To assess the effects of prevalence shifts on model calibration, we measured miscalibration on the deployment test set D dep (r) as a function of the increasing IR r for five scenarios: no re-calibration, temperature scaling, and affine scaling (the latter two with and without weight adaptation). Furthermore, (2) to assess the effects of prevalence shifts on the decision rule, for the 24 binary tasks, we computed -with and without re-calibration and for varying IR r -the differences between the metric scores on D dep (r) corresponding to an optimal decision rule and two other decision rules: argmax and a cutoff that was tuned on D test . Lastly, (3) to assess the effects of prevalence shifts on the generalizability of validation results, we measured the absolute difference between the metric scores obtained on the development test data D test and those obtained on the deployment test data D dep (r) with varying IR r. The scores were computed for the argmax decision rule for both non-re-calibrated and re-calibrated predicted class scores. To account for potential uncertainty in estimating deployment prevalences, we repeated all experiments with slight perturbation of the true prevalences. To this end, we drew the prevalence for each class from a normal distribution with a mean equal to the real class prevalence and fixed standard deviation (std). We then set a minimal score of 0.01 for each class and normalized the resulting distribution. </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="3">Results</head><p>Effects of Prevalence Shifts on Model Calibration. In general, the calibration error increases with an increasing discrepancy between the class prevalences in the development and the deployment setting (Fig. <ref type="figure" target="#fig_2">3</ref>). The results clearly demonstrate that a simple accuracy-preserving temperature scaling-based method is not sufficient under prevalence shifts. Only our proposed method, which combines an affine transformation with a prevalence-driven weight adjustment, consistently features good calibration performance. This also holds true when perturbing the deployment prevalences, as demonstrated in Fig. <ref type="figure">7</ref> (Suppl.). For the inspected range (up to r = 10), miscalibration can be kept constantly close to 0. Note that CWCE is a biased estimator of the canonical calibration error <ref type="bibr" target="#b26">[27]</ref>, which is why we additionally report the Brier Score (BS) as an overall performance measure (Fig. <ref type="figure">6</ref> Suppl.).</p><p>Effects of Prevalence Shifts on the Decision Rule. Figure <ref type="figure" target="#fig_3">4</ref> supports our proposal: An argmax-based decision informed by calibrated predicted class scores (top right) and assessed with the Expected Cost (EC) metric (identical to the blue Accuracy line in this case) yields optimal results irrespective of prevalence shifts. In fact, this approach substantially increases the quality of the decisions when compared to a baseline without re-calibration, as indicated by an average relative decrease of EC by 25%. This holds true in a similar fashion for perturbed versions of the re-calibration (Fig. <ref type="figure">8</ref> Suppl.). The results further show that argmax is not the best decision rule for F1 Score and MCC (Fig. <ref type="figure" target="#fig_3">4</ref> </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>top).</head><p>Importantly, decision rules optimized on a development dataset do not generalize to unseen data under prevalence shifts (Fig. <ref type="figure" target="#fig_3">4</ref> bottom). </p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head>Effects of Prevalence Shifts on the Generalizability of Validation</head><p>Results. As shown in Fig. <ref type="figure" target="#fig_4">5</ref>, large deviations from the metric score obtained on the development test data of up to 0.41/0.18 (Accuracy), 0.35/0.46 (F1 Score), and 0.27/0.32 (MCC), can be observed for the re-calibrated/non-re-calibrated case. In contrast, the proposed variation of Expected Cost (EC) enables a reliable estimation of performance irrespective of prevalence shifts, even when the prevalences are not known exactly (Fig. <ref type="figure">9</ref> Suppl.). The same holds naturally true for the prevalence-independent metrics Balanced Accuracy (BA) and Area under the Receiver Operating Curve (AUROC) (Fig. <ref type="figure">9</ref> Suppl.).</p></div>
<div xmlns="http://www.tei-c.org/ns/1.0"><head n="4">Discussion</head><p>Important findings, some of which are experimental confirmations of theory, are:</p><p>1. Prevalence shifts lead to miscalibration. A weight-adjusted affine recalibration based on estimated deployment prevalences compensates for this effect. 2. Argmax should not be used indiscriminately as a decision rule. For the metric EC and specializations thereof (e.g., Accuracy), optimal decision rules may be derived from theory, provided that the predicted class scores are calibrated. This derived rule may coincide with argmax, but for other common metrics (F1 Score, MCC) argmax does not lead to optimal results. 3. An optimal decision rule, tuned on a development dataset, does not generalize to datasets with different prevalences. Prevalence-aware setting of the decision rule requires data-driven adjustment or selection of a metric with a Bayes theory-driven optimal decision rule. 4. Common prevalence-dependent metrics, such as MCC and F1 Score, do not give robust estimations of performance under prevalence shifts. EC, with adjusted prevalences, can be used in these scenarios.</p><p>These findings have been confirmed by repeated experiments using multiple random seeds for dataset splitting and model training. Overall, we present strong evidence that the so far uncommon metric EC offers key advantages over established metrics. Due to its strong theoretical foundation and flexibility in configuration it should, from our perspective, evolve to a default metric in image classification. Note in this context that while our study clearly demonstrates the advantages of prevalence-independent metrics, prevalence-dependent metrics can be much better suited to reflect the clinical interest <ref type="bibr" target="#b26">[27]</ref>.</p><p>In conclusion, our results clearly demonstrate that ignoring potential prevalence shifts may lead to suboptimal decisions and poor performance assessment. In contrast to prior work <ref type="bibr" target="#b24">[25]</ref>, our proposed workflow solely requires an estimation of the deployment prevalences -and no actual deployment data or model modification. It is thus ideally suited for widespread adoption as a common practice in prevalence-aware image classification.</p></div><figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_0"><head>Fig. 1 .</head><label>1</label><figDesc>Fig. 1. Summary of contributions. (a) Based on a dataset comprising 30 medical image classification tasks, we show that prevalence shifts between development data and deployment data engender various problems. (b) Our workflow for prevalence-aware medical image classification addresses all of these issues.</figDesc></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_1"><head>Fig. 2 .</head><label>2</label><figDesc>Fig. 2. Medical image classification tasks used in this study. The number of samples (red) and classes (green) ranges from 1,200 to 121,583 and two to eight, respectively. The imbalance ratio (blue) varies between 1 and 10.9. (Color figure online)</figDesc><graphic coords="3,56,46,191,18,339,43,114,28" type="bitmap" /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_2"><head>Fig. 3 .</head><label>3</label><figDesc>Fig. 3. Effect of prevalence shifts on the calibration. The class-wise calibration error (CWCE) generally increases with an increasing prevalence shift from development (balanced) to deployment test set. Left: Mean (line) and standard deviation (shaded area) obtained from n = 30 medical classification tasks. Right: CWCE values for all tasks at imbalance ratio 10.</figDesc><graphic coords="7,63,96,53,96,324,88,90,76" type="bitmap" /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_3"><head>Fig. 4 .</head><label>4</label><figDesc>Fig. 4. Effect of prevalence shifts on the decision rule. The difference between the actual metric score and the optimal metric score (optimal decision rule) is shown as a function of the imbalance ratio for non-re-calibrated (left) and re-calibrated (right) models for two decision rule strategies: argmax (top) and threshold optimization on the development test set (bottom). Mean (lines) and standard deviation (transparent area) obtained from n = 24 binary tasks.</figDesc><graphic coords="7,64,47,378,92,323,44,143,92" type="bitmap" /></figure>
<figure xmlns="http://www.tei-c.org/ns/1.0" xml:id="fig_4"><head>Fig. 5 .</head><label>5</label><figDesc>Fig. 5. Effect of prevalence shifts on the generalizability of validation results. The absolute difference of the metric score computed on the deployment data to that computed on the development test set is shown as a function of the imbalance ratio (IR) for nonre-calibrated (top) and re-calibrated (bottom) models. The dot-and boxplots show the results for all n = 30 tasks at a fixed IR of 10.</figDesc><graphic coords="8,62,79,262,76,298,84,131,44" type="bitmap" /></figure>
		</body>
		<back>

			<div type="acknowledgement">
<div><p>Acknowledgements. This project has been funded by (i) the <rs type="funder">German Federal Ministry of Health</rs> under the reference number <rs type="grantNumber">2520DAT0P1</rs> as part of the pAItient (<rs type="projectName">Protected Artificial Intelligence Innovation Environment for Patient Oriented Digital Health Solutions for developing, testing and evidence based evaluation of clinical value)</rs> project<rs type="projectName">, (ii) HELMHOLTZ IMAGING</rs>, a platform of the Helmholtz Information &amp; Data Science Incubator and (iii) the <rs type="institution">Helmholtz Association</rs> under the joint research school "<rs type="programName">HIDSS4Health -Helmholtz Information and Data Science School for Health</rs>" (iv) state funds approved by the <rs type="funder">State Parliament of Baden-Württemberg for the Innovation Campus Health + Life Science Alliance Heidelberg Mannheim</rs>.</p></div>
			</div>
			<listOrg type="funding">
				<org type="funded-project" xml:id="_RZXQauW">
					<idno type="grant-number">2520DAT0P1</idno>
					<orgName type="project" subtype="full">Protected Artificial Intelligence Innovation Environment for Patient Oriented Digital Health Solutions for developing, testing and evidence based evaluation of clinical value)</orgName>
				</org>
				<org type="funded-project" xml:id="_M2WaCqk">
					<orgName type="project" subtype="full">, (ii) HELMHOLTZ IMAGING</orgName>
					<orgName type="program" subtype="full">HIDSS4Health -Helmholtz Information and Data Science School for Health</orgName>
				</org>
			</listOrg>
			<div type="annex">
<div xmlns="http://www.tei-c.org/ns/1.0"><head>Supplementary Information</head><p>The online version contains supplementary material available at https://doi.org/10.1007/978-3-031-43898-1_38.</p></div>			</div>
			<div type="references">

				<listBibl>

<biblStruct xml:id="b0">
	<monogr>
		<ptr target="https://www.kaggle.com/ahemateja19bec1025/covid-xray-dataset" />
		<title level="m">Covid19 x-ray classification dataset on Kaggle</title>
		<imprint>
			<date type="published" when="2022-01">Jan 2022</date>
			<biblScope unit="volume">13</biblScope>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b1">
	<analytic>
		<title level="a" type="main">Maximum likelihood with bias-corrected calibration is hard-to-beat at label shift adaptation</title>
		<author>
			<persName><forename type="first">A</forename><forename type="middle">M</forename><surname>Alexandari</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">International Conference on Machine Learning</title>
		<imprint>
			<date type="published" when="2020">2020</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b2">
	<monogr>
		<title level="m" type="main">Pattern recognition and machine learning (information science and statistics</title>
		<author>
			<persName><forename type="first">C</forename><forename type="middle">M</forename><surname>Bishop</surname></persName>
		</author>
		<imprint>
			<date type="published" when="2006">2006</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b3">
	<monogr>
		<author>
			<persName><forename type="first">J</forename><surname>Bohaju</surname></persName>
		</author>
		<idno type="DOI">10.34740/KAGGLE/DSV/1370-629</idno>
		<ptr target="https://doi.org/10.34740/KAGGLE/DSV/1370-629" />
		<title level="m">Brain tumor</title>
		<imprint>
			<date type="published" when="2020">2020</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b4">
	<monogr>
		<title level="m" type="main">Hyper-kvasir: a comprehensive multi-class image and video dataset for gastrointestinal endoscopy</title>
		<author>
			<persName><forename type="first">H</forename><surname>Borgli</surname></persName>
		</author>
		<idno type="DOI">10.31219/osf.io/mkzcq</idno>
		<ptr target="https://doi.org/10.31219/osf.io/mkzcq" />
		<imprint>
			<date type="published" when="2019-12">December 2019</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b5">
	<analytic>
		<title level="a" type="main">On calibration of language recognition scores</title>
		<author>
			<persName><forename type="first">N</forename><surname>Brummer</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">2006 IEEE Odyssey -The Speaker and Language Recognition Workshop</title>
		<imprint>
			<date type="published" when="2006">2006</date>
			<biblScope unit="page" from="1" to="8" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b6">
	<analytic>
		<title level="a" type="main">Albumentations: fast and flexible image augmentations</title>
		<author>
			<persName><forename type="first">A</forename><surname>Buslaev</surname></persName>
		</author>
		<idno type="DOI">10.3390/info11020125</idno>
		<ptr target="https://doi.org/10.3390/info11020125" />
	</analytic>
	<monogr>
		<title level="j">Information</title>
		<imprint>
			<biblScope unit="volume">11</biblScope>
			<biblScope unit="issue">2</biblScope>
			<date type="published" when="2020">2020</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b7">
	<analytic>
		<title level="a" type="main">Causality matters in medical imaging</title>
		<author>
			<persName><forename type="first">D</forename><forename type="middle">C</forename><surname>De Castro</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Nat. Commun</title>
		<imprint>
			<biblScope unit="volume">11</biblScope>
			<date type="published" when="2019">2019</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b8">
	<monogr>
		<title level="m" type="main">brain tumor dataset</title>
		<author>
			<persName><forename type="first">J</forename><surname>Cheng</surname></persName>
		</author>
		<idno type="DOI">10.6084/m9.figshare.1512427.v5</idno>
		<ptr target="https://doi.org/10.6084/m9.figshare.1512427.v5" />
		<imprint>
			<date type="published" when="2017-04">April 2017</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b9">
	<analytic>
		<title level="a" type="main">Imagenet: a large-scale hierarchical image database</title>
		<author>
			<persName><forename type="first">J</forename><surname>Deng</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">2009 IEEE Conference on Computer Vision and Pattern Recognition</title>
		<imprint>
			<date type="published" when="2009">2009</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b10">
	<analytic>
		<title level="a" type="main">Preventing dataset shift from breaking machine-learning biomarkers</title>
		<author>
			<persName><forename type="first">J</forename><surname>Dockes</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">GigaScience</title>
		<imprint>
			<biblScope unit="volume">10</biblScope>
			<date type="published" when="2021">2021</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b11">
	<monogr>
		<title/>
		<author>
			<persName><forename type="first">W</forename><surname>Falcon</surname></persName>
		</author>
		<idno type="DOI">10.5281/zenodo.3828935</idno>
		<ptr target="https://github.com/Lightning-AI/lightning" />
		<imprint>
			<date type="published" when="2019-03">March 2019</date>
			<publisher>PyTorch Lightning</publisher>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b12">
	<monogr>
		<title level="m" type="main">Analysis and comparison of classification metrics</title>
		<author>
			<persName><forename type="first">L</forename><surname>Ferrer</surname></persName>
		</author>
		<idno>arXiv abs/2209.05355</idno>
		<imprint>
			<date type="published" when="2022">2022</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b13">
	<monogr>
		<title level="m" type="main">Relevance-based compression of cataract surgery videos using convolutional neural networks</title>
		<author>
			<persName><forename type="first">N</forename><surname>Ghamsarian</surname></persName>
		</author>
		<idno type="DOI">10.1145/3394171.3413658</idno>
		<ptr target="https://doi.org/10.1145/3394171.3413658" />
		<imprint>
			<date type="published" when="2020">2020</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b14">
	<analytic>
		<title level="a" type="main">On calibration of modern neural networks</title>
		<author>
			<persName><forename type="first">C</forename><surname>Guo</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Proceedings of the 34th International Conference on Machine Learning. ICML&apos;17</title>
		<meeting>the 34th International Conference on Machine Learning. ICML&apos;17</meeting>
		<imprint>
			<date type="published" when="2017">2017</date>
			<biblScope unit="volume">70</biblScope>
			<biblScope unit="page" from="1321" to="1330" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b15">
	<monogr>
		<author>
			<persName><forename type="first">T</forename><forename type="middle">J</forename><surname>Hastie</surname></persName>
		</author>
		<title level="m">The elements of statistical learning</title>
		<imprint>
			<date type="published" when="2001">2001</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b16">
	<analytic>
		<title level="a" type="main">Deep residual learning for image recognition</title>
		<author>
			<persName><forename type="first">K</forename><surname>He</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">2016 IEEE Conference on Computer Vision and Pattern Recognition</title>
		<imprint>
			<publisher>CVPR</publisher>
			<date type="published" when="2016">2016</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b17">
	<monogr>
		<title level="m" type="main">CheXpert: a large chest radiograph dataset with uncertainty labels and expert</title>
		<author>
			<persName><forename type="first">J</forename><surname>Irvin</surname></persName>
		</author>
		<imprint>
			<date type="published" when="2019">2019</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b18">
	<analytic>
		<title level="a" type="main">Survey on deep learning with class imbalance</title>
		<author>
			<persName><forename type="first">J</forename><forename type="middle">M</forename><surname>Johnson</surname></persName>
		</author>
		<author>
			<persName><forename type="first">T</forename><forename type="middle">M</forename><surname>Khoshgoftaar</surname></persName>
		</author>
		<idno type="DOI">10.1186/s40537-019-0192-5</idno>
		<ptr target="https://doi.org/10.1186/s40537-019-0192-5" />
	</analytic>
	<monogr>
		<title level="j">J. Big Data</title>
		<imprint>
			<biblScope unit="volume">6</biblScope>
			<biblScope unit="issue">1</biblScope>
			<biblScope unit="page" from="1" to="54" />
			<date type="published" when="2019">2019</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b19">
	<analytic>
		<title level="a" type="main">Identifying medical diagnoses and treatable diseases by image-based deep learning</title>
		<author>
			<persName><forename type="first">D</forename><forename type="middle">S</forename><surname>Kermany</surname></persName>
		</author>
		<idno type="DOI">10.1016/j.cell.2018.02.010</idno>
		<idno>02.010</idno>
		<ptr target="https://doi.org/10.1016/j.cell" />
	</analytic>
	<monogr>
		<title level="j">Cell</title>
		<imprint>
			<biblScope unit="volume">172</biblScope>
			<biblScope unit="issue">5</biblScope>
			<biblScope unit="page">9</biblScope>
			<date type="published" when="2018">2018. 2018</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b20">
	<monogr>
		<title level="m" type="main">Adam: a method for stochastic optimization</title>
		<author>
			<persName><forename type="first">D</forename><forename type="middle">P</forename><surname>Kingma</surname></persName>
		</author>
		<idno>CoRR abs/1412.6980</idno>
		<imprint>
			<date type="published" when="2015">2015</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b21">
	<analytic>
		<title level="a" type="main">Lapgyn4: a dataset for 4 automatic content analysis problems in the domain of laparoscopic gynecology</title>
		<author>
			<persName><forename type="first">A</forename><surname>Leibetseder</surname></persName>
		</author>
		<idno type="DOI">10.1145/3204949.3208127</idno>
		<ptr target="https://doi.org/10.1145/3204949.3208127" />
	</analytic>
	<monogr>
		<title level="m">Proceedings of the 9th ACM Multimedia Systems Conference</title>
		<meeting>the 9th ACM Multimedia Systems Conference<address><addrLine>MMSys; Amsterdam, The Netherlands</addrLine></address></meeting>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2018-06">2018. 12-15 June 2018. 2018</date>
			<biblScope unit="page" from="357" to="362" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b22">
	<analytic>
		<title level="a" type="main">Detecting and correcting for label shift with black box predictors</title>
		<author>
			<persName><forename type="first">Z</forename><forename type="middle">C</forename><surname>Lipton</surname></persName>
		</author>
		<ptr target="http://proceedings.mlr.press/v80/lipton18a.html" />
	</analytic>
	<monogr>
		<title level="m">Proceedings of the 35th International Conference on Machine Learning, ICML 2018, Stockholmsmässan</title>
		<meeting>the 35th International Conference on Machine Learning, ICML 2018, Stockholmsmässan<address><addrLine>Stockholm, Sweden</addrLine></address></meeting>
		<imprint>
			<date type="published" when="2018-07-15">10-15 July 2018. 2018</date>
			<biblScope unit="volume">80</biblScope>
			<biblScope unit="page" from="3128" to="3136" />
		</imprint>
	</monogr>
	<note>Proceedings of Machine Learning Research</note>
</biblStruct>

<biblStruct xml:id="b23">
	<analytic>
		<title level="a" type="main">Deepdrid: diabetic retinopathy-grading and image quality estimation challenge</title>
		<author>
			<persName><forename type="first">R</forename><surname>Liu</surname></persName>
		</author>
		<idno type="DOI">10.1016/j.patter.2022.100512</idno>
		<ptr target="https://doi.org/10.1016/j.patter.2022.100512" />
	</analytic>
	<monogr>
		<title level="j">Patterns</title>
		<imprint>
			<biblScope unit="page">100512</biblScope>
			<date type="published" when="2022">2022</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b24">
	<analytic>
		<title level="a" type="main">Test-time adaptation with calibration of medical image classification nets for label distribution shift</title>
		<author>
			<persName><forename type="first">W</forename><surname>Ma</surname></persName>
		</author>
		<author>
			<persName><forename type="first">C</forename><surname>Chen</surname></persName>
		</author>
		<author>
			<persName><forename type="first">S</forename><surname>Zheng</surname></persName>
		</author>
		<author>
			<persName><forename type="first">J</forename><surname>Qin</surname></persName>
		</author>
		<author>
			<persName><forename type="first">H</forename><surname>Zhang</surname></persName>
		</author>
		<author>
			<persName><forename type="first">Q</forename><surname>Dou</surname></persName>
		</author>
		<idno type="DOI">10.1007/978-3-031-16437-8_30</idno>
		<ptr target="https://doi.org/10.1007/978-3-031-16437-8_30" />
	</analytic>
	<monogr>
		<title level="m">MICCAI 2022</title>
		<editor>
			<persName><forename type="first">L</forename><surname>Wang</surname></persName>
		</editor>
		<editor>
			<persName><forename type="first">Q</forename><surname>Dou</surname></persName>
		</editor>
		<editor>
			<persName><forename type="first">P</forename><forename type="middle">T</forename><surname>Fletcher</surname></persName>
		</editor>
		<editor>
			<persName><forename type="first">S</forename><surname>Speidel</surname></persName>
		</editor>
		<editor>
			<persName><forename type="first">S</forename><surname>Li</surname></persName>
		</editor>
		<meeting><address><addrLine>Cham</addrLine></address></meeting>
		<imprint>
			<publisher>Springer</publisher>
			<date type="published" when="2022">2022</date>
			<biblScope unit="volume">13433</biblScope>
			<biblScope unit="page" from="313" to="323" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b25">
	<analytic>
		<title level="a" type="main">Why rankings of biomedical image analysis competitions should be interpreted with care</title>
		<author>
			<persName><forename type="first">L</forename><surname>Maier-Hein</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Nat. Commun</title>
		<imprint>
			<biblScope unit="volume">9</biblScope>
			<date type="published" when="2018">2018</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b26">
	<monogr>
		<author>
			<persName><forename type="first">L</forename><surname>Maier-Hein</surname></persName>
		</author>
		<idno>arXiv abs/2206.01653</idno>
		<title level="m">Metrics reloaded: pitfalls and recommendations for image analysis validation</title>
		<imprint>
			<date type="published" when="2022">2022</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b27">
	<analytic>
		<title level="a" type="main">PyTorch: an imperative style, high-performance deep learning library</title>
		<author>
			<persName><forename type="first">A</forename><surname>Paszke</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">Advances in Neural Information Processing Systems</title>
		<imprint>
			<publisher>Curran Associates, Inc</publisher>
			<date type="published" when="2019">2019</date>
			<biblScope unit="volume">32</biblScope>
			<biblScope unit="page" from="8024" to="8035" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b28">
	<monogr>
		<title level="m" type="main">Probabilistic outputs for support vector machines and comparisons to regularized likelihood methods</title>
		<author>
			<persName><forename type="first">J</forename><surname>Platt</surname></persName>
		</author>
		<imprint>
			<date type="published" when="1999">1999</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b29">
	<analytic>
		<title level="a" type="main">Nerthus: a bowel preparation quality video dataset</title>
		<author>
			<persName><forename type="first">K</forename><surname>Pogorelov</surname></persName>
		</author>
		<idno type="DOI">10.1145/3083187.3083216</idno>
		<ptr target="https://doi.org/10.1145/3083187.3083216" />
	</analytic>
	<monogr>
		<title level="m">Proceedings of the 8th ACM on Multimedia Systems Conference. MMSys&apos;17</title>
		<meeting>the 8th ACM on Multimedia Systems Conference. MMSys&apos;17<address><addrLine>New York</addrLine></address></meeting>
		<imprint>
			<publisher>ACM</publisher>
			<date type="published" when="2017">2017</date>
			<biblScope unit="page" from="170" to="174" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b30">
	<analytic>
		<title level="a" type="main">MURA dataset: towards radiologist-level abnormality detection in musculoskeletal radiographs</title>
		<author>
			<persName><forename type="first">P</forename><surname>Rajpurkar</surname></persName>
		</author>
		<ptr target="https://openreview.net/forum?id=r1Q98pjiG" />
	</analytic>
	<monogr>
		<title level="j">Medical Imaging with Deep Learning</title>
		<imprint>
			<date type="published" when="2018">2018</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b31">
	<analytic>
		<title level="a" type="main">Adjusting the outputs of a classifier to new a priori probabilities: a simple procedure</title>
		<author>
			<persName><forename type="first">M</forename><surname>Saerens</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Neural Comput</title>
		<imprint>
			<biblScope unit="volume">14</biblScope>
			<biblScope unit="page" from="21" to="41" />
			<date type="published" when="2002">2002</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b32">
	<monogr>
		<author>
			<persName><forename type="first">S</forename><surname>Saria</surname></persName>
		</author>
		<idno>arXiv abs/1904.07204</idno>
		<title level="m">Tutorial: safe and reliable machine learning</title>
		<imprint>
			<date type="published" when="2019">2019</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b33">
	<analytic>
		<title level="a" type="main">Improving predictive inference under covariate shift by weighting the log-likelihood function</title>
		<author>
			<persName><forename type="first">H</forename><surname>Shimodaira</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">J. Stat. Plann. Inference</title>
		<imprint>
			<biblScope unit="volume">90</biblScope>
			<biblScope unit="page" from="227" to="244" />
			<date type="published" when="2000">2000</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b34">
	<analytic>
		<title level="a" type="main">Kvasir-capsule, a video capsule endoscopy dataset</title>
		<author>
			<persName><forename type="first">P</forename><forename type="middle">H</forename><surname>Smedsrud</surname></persName>
		</author>
		<idno type="DOI">10.1038/s41597-021-00920-z</idno>
		<ptr target="https://doi.org/10.1038/s41597-021-00920-z" />
	</analytic>
	<monogr>
		<title level="j">Sci. Data</title>
		<imprint>
			<biblScope unit="volume">8</biblScope>
			<biblScope unit="issue">1</biblScope>
			<biblScope unit="page">142</biblScope>
			<date type="published" when="2021">2021</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b35">
	<analytic>
		<title level="a" type="main">Cyclical learning rates for training neural networks</title>
		<author>
			<persName><forename type="first">L</forename><forename type="middle">N</forename><surname>Smith</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">2017 IEEE Winter Conference on Applications of Computer Vision (WACV)</title>
		<imprint>
			<date type="published" when="2015">2015</date>
			<biblScope unit="page" from="464" to="472" />
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b36">
	<analytic>
		<title level="a" type="main">From development to deployment: dataset shift, causality, and shift-stable models in health AI</title>
		<author>
			<persName><forename type="first">A</forename><surname>Subbaswamy</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Biostatistics</title>
		<imprint>
			<date type="published" when="2019">2019</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b37">
	<analytic>
		<title level="a" type="main">Endonet: a deep architecture for recognition tasks on laparoscopic videos</title>
		<author>
			<persName><forename type="first">A</forename><forename type="middle">P</forename><surname>Twinanda</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">IEEE Trans. Med. Imaging</title>
		<imprint>
			<biblScope unit="volume">36</biblScope>
			<biblScope unit="page" from="86" to="97" />
			<date type="published" when="2017">2017</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b38">
	<monogr>
		<title level="m" type="main">PyTorch image models</title>
		<author>
			<persName><forename type="first">R</forename><surname>Wightman</surname></persName>
		</author>
		<idno type="DOI">10.5281/zenodo.4414861</idno>
		<ptr target="https://github.com/rwightman/pytorch-image-models" />
		<imprint>
			<date type="published" when="2019">2019</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b39">
	<analytic>
		<title level="a" type="main">Shifting machine learning for healthcare from development to deployment and from models to data</title>
		<author>
			<persName><forename type="first">A</forename><surname>Zhang</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="j">Nat. Biomed. Eng</title>
		<imprint>
			<biblScope unit="volume">6</biblScope>
			<biblScope unit="page" from="1330" to="1345" />
			<date type="published" when="2022">2022</date>
		</imprint>
	</monogr>
</biblStruct>

<biblStruct xml:id="b40">
	<analytic>
		<title level="a" type="main">Domain adaptation under target and conditional shift</title>
		<author>
			<persName><forename type="first">K</forename><surname>Zhang</surname></persName>
		</author>
	</analytic>
	<monogr>
		<title level="m">International Conference on Machine Learning</title>
		<imprint>
			<date type="published" when="2013">2013</date>
		</imprint>
	</monogr>
</biblStruct>

				</listBibl>
			</div>
		</back>
	</text>
</TEI>
